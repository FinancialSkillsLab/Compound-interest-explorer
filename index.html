<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Watch Your Savings Grow</title>
<style>
  :root{ --bg:#faf9f6; --ink:#292424; --accent:#004851; --muted:#91C0CB; --card:#ffffff; --pill:#f4f6f8; }
  *{ box-sizing:border-box }
  body{ margin:0; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink); background:var(--bg) }
  .wrap{ max-width:1200px; margin:40px auto; padding:24px }
  .card{ background:var(--card); border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.06); padding:24px }
  h1{ margin:0 0 8px; color:var(--accent); font-size:2rem }
  h2{ margin:0 0 12px; color:var(--accent); font-size:1.25rem }

  /* Intro */
  .intro{ display:grid; gap:16px; justify-items:start }
  .lead{ max-width:70ch }
  .btn{ appearance:none; border:1px solid #e6e6e6; border-radius:12px; padding:12px 18px; font-weight:700; cursor:pointer; background:#fff; color:var(--accent) }
  .btn-primary{ background:var(--accent); color:#fff; border-color:transparent }

  /* Layout */
  .layout{ display:grid; gap:24px; grid-template-columns:420px 1fr }
  @media (max-width:960px){ .layout{ grid-template-columns:1fr } }

  /* Inputs */
  .grid{ display:grid; gap:12px }
  label{ font-weight:600; display:flex; flex-direction:column; gap:6px }
  input{ padding:10px 12px; border:1px solid #ddd; border-radius:10px; font:inherit }
  .actions{ margin-top:12px; display:flex; gap:8px; flex-wrap:wrap }
  .note{ margin:10px 0 0; font-size:.9rem; color:#444 }

  /* Results */
  #results{ display:block }
  .pillrow{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:8px; margin:8px 0 16px }
  .pill{ background:var(--pill); padding:10px 12px; border-radius:12px }
  .group{ background:#fff; border:1px solid #eee; border-radius:12px; padding:16px }

  /* Summary table */
  table{ width:100%; border-collapse:collapse; background:#fff; border:1px solid #eee; border-radius:12px; overflow:hidden }
  th,td{ padding:10px 12px; border-bottom:1px solid #eee; text-align:right; white-space:nowrap }
  th:first-child,td:first-child{ text-align:left }
  tfoot td{ font-weight:700 }

  footer{ margin-top:18px; font-size:.85rem; color:#666 }
  .hide{ display:none }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="wrap">

  <!-- INTRO -->
  <div id="intro" class="card intro">
    <h1>Watch Your Savings Grow</h1>
    <p class="lead">See how small weekly savings add up over time. Adjust your starting age to compare two scenarios and discover why starting earlier helps your future self.</p>
    <button class="btn btn-primary" id="start">Start</button>
  </div>

  <!-- SIMULATOR -->
  <div id="sim" class="card hide">
    <div class="layout">
      <!-- Left: Inputs -->
      <div>
        <h2>Inputs</h2>
        <div class="grid">
          <label>Weekly savings (A$)
            <input type="number" id="weekly" value="50" min="0" step="1">
          </label>
          <label>Annual interest rate (% p.a.)
            <input type="number" id="rate" value="7" min="0" step="0.1">
          </label>
          <label>Start age — Scenario A
            <input type="number" id="startA" value="20" min="0" step="1">
          </label>
          <label>Start age — Scenario B
            <input type="number" id="startB" value="30" min="0" step="1">
          </label>
          <label>Retirement age
            <input type="number" id="retire" value="65" min="1" step="1">
          </label>
        </div>
        <div class="actions">
          <button class="btn btn-primary" id="run">Run</button>
          <button class="btn" id="reset">Reset</button>
        </div>
        <p class="note">Assumes weekly deposits converted to monthly (52/12) with monthly compounding and a constant annual rate.</p>
      </div>

      <!-- Right: Results -->
      <div id="results"></div>
    </div>
    <footer>For education only. Figures are indicative; not financial advice.</footer>
  </div>
</div>

<script>
const $ = s => document.querySelector(s);
const currency = v => Number(v||0).toLocaleString('en-AU',{style:'currency',currency:'AUD'});

/* Core simulation: weekly deposit -> monthly, monthly compounding */
function simulate({weekly, rate, startAge, retireAge}){
  const months = Math.max(0, (retireAge - startAge) * 12);
  const rMonthly = rate/100/12;
  const monthlyDeposit = weekly * 52/12;
  let bal = 0;
  for(let m=1; m<=months; m++){
    bal = (bal + monthlyDeposit) * (1 + rMonthly);
  }
  const years = (retireAge - startAge);
  const totalContrib = monthlyDeposit * months;
  return { final: bal, years, totalContrib, interest: bal - totalContrib };
}

let chart;

/* Build summary table like your screenshot */
function summaryTable(A, B, startA, startB){
  return `
  <h2>Scenario Summary</h2>
  <table>
    <thead>
      <tr>
        <th>Scenario</th>
        <th>Start Age</th>
        <th>Years Contributing</th>
        <th>Total Contributed</th>
        <th>Interest Earned</th>
        <th>Final Balance</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>A</strong></td>
        <td>${startA}</td>
        <td>${A.years.toFixed(1)}</td>
        <td>${currency(A.totalContrib)}</td>
        <td>${currency(A.interest)}</td>
        <td>${currency(A.final)}</td>
      </tr>
      <tr>
        <td><strong>B</strong></td>
        <td>${startB}</td>
        <td>${B.years.toFixed(1)}</td>
        <td>${currency(B.totalContrib)}</td>
        <td>${currency(B.interest)}</td>
        <td>${currency(B.final)}</td>
      </tr>
    </tbody>
  </table>`;
}

/* For the chart, generate aligned yearly points so the growth curves show */
function yearlySeries({weekly, rate, startAge, retireAge}){
  const rMonthly = rate/100/12;
  const monthlyDeposit = weekly * 52/12;
  const labels = [];
  const data = [];
  let bal = 0;
  for(let age = startAge+1; age<=retireAge; age++){
    // simulate 12 months for that year
    for(let m=0; m<12; m++){
      bal = (bal + monthlyDeposit) * (1 + rMonthly);
    }
    labels.push(age);
    data.push(bal);
  }
  return { labels, data };
}

function render(){
  const weekly = +$('#weekly').value||0;
  const rate   = +$('#rate').value||0;
  const startA = +$('#startA').value||0;
  const startB = +$('#startB').value||0;
  const retire = +$('#retire').value||0;

  const A = simulate({weekly, rate, startAge:startA, retireAge:retire});
  const B = simulate({weekly, rate, startAge:startB, retireAge:retire});
  const seriesA = yearlySeries({weekly, rate, startAge:startA, retireAge:retire});
  const seriesB = yearlySeries({weekly, rate, startAge:startB, retireAge:retire});

  // Right pane: totals (value of starting earlier), summary table, then chart
  const diff = A.final - B.final;
  $('#results').innerHTML = `
    <h2>Growth Over Time</h2>
    <div class="pillrow">
      <div class="pill"><strong>A: start age ${startA} — Final:</strong> ${currency(A.final)}</div>
      <div class="pill"><strong>B: start age ${startB} — Final:</strong> ${currency(B.final)}</div>
      <div class="pill"><strong>Value of starting earlier:</strong> ${currency(diff)}</div>
    </div>

    <div class="group" style="margin-bottom:16px;">
      ${summaryTable(A,B,startA,startB)}
    </div>

    <div class="group">
      <canvas id="chart" height="220" aria-label="Balance over time"></canvas>
    </div>
  `;

  const ctx = document.getElementById('chart').getContext('2d');
  if (chart) chart.destroy();
  // Align labels from the youngest start to retirement
  const minAge = Math.min(startA, startB);
  const maxAge = retire;
  const labels = [];
  for(let age=minAge+1; age<=maxAge; age++){ labels.push(age); }

  // Map series to global labels (with gaps before each start age)
  const mapA = new Map(seriesA.labels.map((a,i)=>[a, seriesA.data[i]]));
  const mapB = new Map(seriesB.labels.map((a,i)=>[a, seriesB.data[i]]));
  const dataA = labels.map(a => mapA.get(a) ?? null);
  const dataB = labels.map(a => mapB.get(a) ?? null);

  chart = new Chart(ctx,{
    type:'line',
    data:{
      labels,
      datasets:[
        { label:`A: start age ${startA}`, data:dataA, borderColor:'#1f6feb', backgroundColor:'transparent', tension:.25, spanGaps:true },
        { label:`B: start age ${startB}`, data:dataB, borderColor:'#2da44e', backgroundColor:'transparent', tension:.25, spanGaps:true }
      ]
    },
    options:{
      plugins:{ legend:{ display:true } },
      scales:{
        x:{ title:{ display:true, text:'Age' } },
        y:{ title:{ display:true, text:'Balance (A$)' }, ticks:{ callback:v=>currency(v) } }
      }
    }
  });
}

/* Intro → Simulator */
$('#start').addEventListener('click', ()=>{ document.getElementById('intro').classList.add('hide'); document.getElementById('sim').classList.remove('hide'); render(); });

/* Buttons */
document.getElementById('run').addEventListener('click', render);
document.getElementById('reset').addEventListener('click', ()=>{
  $('#weekly').value=50; $('#rate').value=7; $('#startA').value=20; $('#startB').value=30; $('#retire').value=65;
  render();
});

/* Load intro first (no auto-render) */
</script>
</body>
</html>
